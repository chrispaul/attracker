<!DOCTYPE html>
<head>
  <style type="text/css">
    html, body { height: 100%; margin: 0; padding: 0; }
    #map { height: 60%; }
  </style>
</head>
<body>
    <h1>Hiker: {{ hiker.trail_name }} </h1>

    {% if error_message %}
        <p><strong>{{ error_message }}</strong></p>
    {% endif %}

    <style>
        .num { text-align: right; }
    </style>

    <div>
      <table>
        <tbody>
              <tr>
                  <td class=num>{{ hiker.miles_hiked }}</td>
                  <td>miles hiked</td>
              </tr>
              <tr>
                  <td class=num>{{ hiker.percent_hiked }}%</td>
                  <td> hiked</td>
              </tr>
              <tr>
                  <td class=num>{{ hiker.miles_to_go }}</td>
                  <td>miles remaining</td>
              </tr>
        </tbody>
      </table>
    </div>
    <br>

    <div id="table">
      <table border=1>
        <thead>
            <tr>
               <th>Date</th>
               <th>Start mile</th>
               <th>End mile</th>
               <th>Segment Distance</th>
               <th>Description</th>
               <th>Video</th>
               <th>Pictures</th>
               <th>Additional miles</th>
               <th>Delete segment</th>
               <th>Edit segment</th>
            </tr>
        </thead>
        <tbody>
            {% for segment in segments %}
              <tr>
                  <td>{{ segment.date }}</td>
                  <td class=num>{{ segment.start_mile }}</td>
                  <td class=num>{{ segment.end_mile }}</td>
                  <td class=num>{{ segment.distance }}</td>
                  <td>{{ segment.description }}</td>
                  <td>{{ segment.video_url }}</td>
                  <td>{{ segment.picture_url }}</td>
                  <td class=num>{{ segment.additional_miles }}</td>
                  <td><a href="{% url 'segment_delete' hiker.id segment.id %}">Delete Segment</a></td>
                  <td><a href="{% url 'segment_edit' hiker.id segment.id %}">Edit Segment</a></td>
              </tr>
            {% endfor %}
        </tbody>
      </table>
    </div>
    <br>
    Number of Segments: {{ hiker.number_segments }}
    <br>
    <br>
    <a href="{% url 'segment_add' hiker.id %}">Add Segment</a>

    <br>
    <br>
    <a href="{% url 'index' %}">Home to all Hikers</a>

    <br>
    <br>

    Map:
    <div id="map"></div>
    <script type="text/javascript">
        var map;
        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                center: {lat: 44.40016, lng: -71.11198},
                zoom: 15
            });

            // Draw a portion of the trail.
            var trailCoordinates = [
/*
                // Section north of White Mtn Hostel: Anand Thakker's merged data. https://github.com/anandthakker/apptrail
                {lat: 44.40677042040967, lng: -71.13888205137543},
                {lat: 44.40507149281587, lng: -71.13909265682395},
                {lat: 44.40512502999731, lng: -71.13899271558351},
                {lat: 44.403236876613754, lng: -71.12697129075175},
                {lat: 44.403240445236854, lng: -71.12685707273563},
                {lat: 44.404082738783764, lng: -71.12018399170606},
                {lat: 44.404082738782705, lng: -71.12018399180957},
                {lat: 44.40647764059802, lng: -71.11679872116592},
                {lat: 44.40640268720595, lng: -71.11666308802053},
                {lat: 44.40016162702152, lng: -71.11198885103762},
                {lat: 44.40016162701562, lng: -71.11198885114203},
                {lat: 44.40082091867162, lng: -71.1093669308485},
                {lat: 44.40082078639738, lng: -71.1093671001694},
                {lat: 44.3981221642017, lng: -71.11035262302174},
                {lat: 44.3979901042971, lng: -71.1102848073438},
*/

/*
                // Section nort of White Mtn hostel: ATC centerline data
*/
                {lat: 44.40016162702151, lng: -71.11198885103762},
                {lat: 44.40016017265461, lng: -71.1119944870284},
                {lat: 44.40026011006432, lng: -71.11208371888176},
                {lat: 44.40037432416757, lng: -71.11216938128825},
                {lat: 44.4004314312886, lng: -71.11222648973927},
                {lat: 44.40039930901872, lng: -71.1122943069697},
                {lat: 44.40092754917721, lng: -71.11267621835199},
                {lat: 44.40158784946722, lng: -71.11317234646766},
                {lat: 44.40224814975794, lng: -71.11366847458358},
                {lat: 44.40289774258571, lng: -71.11417888004873},
                {lat: 44.4035758887668, lng: -71.11467500799634},
                {lat: 44.40381145526095, lng: -71.11483205549433},
                {lat: 44.40398277586198, lng: -71.11484633112212},
                {lat: 44.40429329410022, lng: -71.11479992713063},
                {lat: 44.40454313642097, lng: -71.11477493958454},
                {lat: 44.40470731877089, lng: -71.11481063115146},
                {lat: 44.40489648567719, lng: -71.11491057009714},
                {lat: 44.40503568425121, lng: -71.11504263332287},
                {lat: 44.4054282963363, lng: -71.1155637491544},
                {lat: 44.40577807792435, lng: -71.11600990984022},
                {lat: 44.40606361389661, lng: -71.116370407647},
                {lat: 44.4062277968887, lng: -71.11653816375609},
                {lat: 44.40640268720593, lng: -71.11666308802055},
                {lat: 44.40647764059802, lng: -71.11679872116592},
                {lat: 44.40640982660212, lng: -71.11687724667003},
                {lat: 44.40632059778251, lng: -71.11700574274394},
                {lat: 44.40612072500726, lng: -71.11724845784646},
                {lat: 44.40581377776655, lng: -71.11766963955861},
                {lat: 44.40538904793753, lng: -71.11814793137543},
                {lat: 44.40523557416124, lng: -71.11832639842388},
                {lat: 44.40507853131128, lng: -71.11852628137768},
                {lat: 44.40500000986896, lng: -71.11862265354257},
                {lat: 44.4049321958038, lng: -71.11868690179877},
                {lat: 44.40486081306384, lng: -71.11885466013517},
                {lat: 44.40475016909118, lng: -71.11896530985153},
                {lat: 44.40465380200291, lng: -71.11911165255238},
                {lat: 44.40451817480907, lng: -71.11943289190977},
                {lat: 44.40441823890724, lng: -71.11965419019522},
                {lat: 44.40432187181901, lng: -71.11980053289607},
                {lat: 44.40423621233339, lng: -71.11996115274343},
                {lat: 44.40416126001684, lng: -71.12004681693863},
                {lat: 44.40408273867864, lng: -71.12016460497513},
                {lat: 44.40408273878272, lng: -71.12018399180957},
            ];
        var trail = new google.maps.Polyline({
            path: trailCoordinates,
                geodesic: true,
                strokeColor: '#FF00FF',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
        trail.setMap(map);

        // Draw a point on the trail for the start of a day
        var latLng = {lat: 44.40016162702151, lng: -71.11198885103762};
        var marker = new google.maps.Marker({
            position: latLng,
            map: map,
            title: '9/8/2015 - 15 miles - Started at White Mountain Lodge & Hostel'
        });
    }
</script>
<script asynch defer
    src="https://maps.googleapis.com/maps/api/js?key={{google_maps_browser_key}}&callback=initMap">
</script>
</body>
